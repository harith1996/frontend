{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./data.service\";\nimport * as i2 from \"@angular/material/toolbar\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/flex-layout/extended\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/badge\";\nimport * as i8 from \"@angular/material/menu\";\nimport * as i9 from \"@angular/material/divider\";\n\nconst _c0 = function () {\n  return [\"\"];\n};\n\nconst _c1 = function () {\n  return [\"temperature\"];\n};\n\nconst _c2 = function () {\n  return [\"humidity\"];\n};\n\nconst _c3 = function () {\n  return [\"distance\"];\n};\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(_dataService) {\n      this._dataService = _dataService;\n      this.group = \"Foxtrot\";\n      this.email = \"202102074@post.au.dk,202102084@post.au.dk\";\n      this.update_rate = -1;\n      this.led = true;\n    }\n\n    ngOnInit() {\n      // Initialize the WebSocket\n      this._dataService.connectWebSocket(); // Get LED state\n\n\n      this._dataService.getLED().subscribe(data => {\n        this.led = data.state;\n      }, err => {\n        console.error(\"An error ocurred while fecthing the LED state :(\");\n        console.error(err);\n      }); // Get relevant info from server\n      // (in this case we get update rate)\n\n\n      this._dataService.getInfo().subscribe(data => {\n        this.update_rate = data.update_rate;\n      }, err => {\n        console.error(\"An error ocurred while fecthing the server state :(\");\n        console.error(err);\n      }); // Subscribe to the shared Observable to update the value\n      // of the LED button.\n\n\n      this._dataService.getWebSocket().subscribe(msg => {\n        let data = JSON.parse(msg.data);\n\n        if (data.type == 'led') {\n          this.led = data.payload.status;\n        }\n      }, err => {\n        console.error(\"An error ocurred while receiving a message from the WebSocket :(\");\n        console.error(err);\n      });\n    }\n    /**\n     * Request to toggle the value of the LED.\n     */\n\n\n    changeLEDState() {\n      var state = Number(!this.led);\n\n      this._dataService.setLED(state).subscribe(() => {}, err => {\n        console.error(\"An error ocurred while setting the LED state :(\");\n        console.error(err);\n      });\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 63,\n    vars: 24,\n    consts: [[\"color\", \"primary\"], [1, \"title\", 3, \"routerLink\"], [1, \"separator\"], [\"mat-icon-button\", \"\", \"fxHide\", \"\", \"fxShow.gt-sm\", \"\", 3, \"routerLink\"], [\"mat-icon-button\", \"\", \"matBadgeOverlap\", \"true\", \"fxHide\", \"\", \"fxShow.gt-sm\", \"\", 3, \"matBadge\", \"click\"], [1, \"spacer\"], [\"mat-button\", \"\", \"fxHide\", \"\", \"fxShow.gt-sm\", \"\", 3, \"disableRipple\"], [\"mat-button\", \"\", \"fxHide\", \"\", \"fxShow.gt-sm\", \"\", 3, \"href\"], [\"fxShow\", \"\", \"fxHide.gt-sm\", \"\", 1, \"spacer\"], [\"mat-icon-button\", \"\", \"matBadgeOverlap\", \"true\", \"fxShow\", \"\", \"fxHide.gt-sm\", \"\", 3, \"matBadge\", \"click\"], [\"mat-button\", \"\", \"fxShow\", \"\", \"fxHide.gt-sm\", \"\", 3, \"matMenuTriggerFor\"], [\"menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"routerLink\"], [\"mat-menu-item\", \"\"], [\"mat-menu-item\", \"\", 3, \"href\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-toolbar\", 0);\n        i0.ɵɵelementStart(1, \"span\", 1);\n        i0.ɵɵtext(2, \"Milestone 1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"button\", 3);\n        i0.ɵɵelementStart(5, \"mat-icon\");\n        i0.ɵɵtext(6, \"thermostat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 3);\n        i0.ɵɵelementStart(8, \"mat-icon\");\n        i0.ɵɵtext(9, \"water_drop\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 3);\n        i0.ɵɵelementStart(11, \"mat-icon\");\n        i0.ɵɵtext(12, \"straighten\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_13_listener() {\n          return ctx.changeLEDState();\n        });\n        i0.ɵɵelementStart(14, \"mat-icon\");\n        i0.ɵɵtext(15, \"wb_sunny\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"div\", 5);\n        i0.ɵɵelementStart(17, \"a\", 6);\n        i0.ɵɵelementStart(18, \"mat-icon\");\n        i0.ɵɵtext(19, \"autorenew\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"span\");\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"a\", 7);\n        i0.ɵɵelementStart(23, \"mat-icon\");\n        i0.ɵɵtext(24, \"group\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"span\");\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"div\", 8);\n        i0.ɵɵelementStart(28, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_28_listener() {\n          return ctx.changeLEDState();\n        });\n        i0.ɵɵelementStart(29, \"mat-icon\");\n        i0.ɵɵtext(30, \"wb_sunny\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 10);\n        i0.ɵɵelementStart(32, \"mat-icon\");\n        i0.ɵɵtext(33, \"more_vert\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-menu\", null, 11);\n        i0.ɵɵelementStart(36, \"button\", 12);\n        i0.ɵɵelementStart(37, \"mat-icon\");\n        i0.ɵɵtext(38, \"thermostat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"span\");\n        i0.ɵɵtext(40, \"Temperature\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 12);\n        i0.ɵɵelementStart(42, \"mat-icon\");\n        i0.ɵɵtext(43, \"water_drop\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"span\");\n        i0.ɵɵtext(45, \"Humidity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"button\", 12);\n        i0.ɵɵelementStart(47, \"mat-icon\");\n        i0.ɵɵtext(48, \"straighten\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"span\");\n        i0.ɵɵtext(50, \"Distance\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"mat-divider\");\n        i0.ɵɵelementStart(52, \"a\", 13);\n        i0.ɵɵelementStart(53, \"mat-icon\");\n        i0.ɵɵtext(54, \"autorenew\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"span\");\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"a\", 14);\n        i0.ɵɵelementStart(58, \"mat-icon\");\n        i0.ɵɵtext(59, \"group\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"span\");\n        i0.ɵɵtext(61);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(62, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(35);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(17, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(18, _c1));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(19, _c2));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(20, _c3));\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"matBadge\", ctx.led ? \"On\" : \"Off\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"disableRipple\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.update_rate / 1000, \"s\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"href\", \"mailto:\", ctx.email, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.group, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate(\"matBadge\", ctx.led ? \"On\" : \"Off\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"matMenuTriggerFor\", _r0);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(21, _c1));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(22, _c2));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(23, _c3));\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\" \", ctx.update_rate / 1000, \"s\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"href\", \"mailto:\", ctx.email, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.group);\n      }\n    },\n    directives: [i2.MatToolbar, i3.RouterLink, i4.MatButton, i5.DefaultShowHideDirective, i6.MatIcon, i7.MatBadge, i4.MatAnchor, i8.MatMenuTrigger, i8.MatMenu, i8.MatMenuItem, i9.MatDivider, i3.RouterOutlet],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp\\\";.spacer[_ngcontent-%COMP%]{flex:1}.separator[_ngcontent-%COMP%]{height:100%;margin-left:1rem;margin-right:1rem}.title[_ngcontent-%COMP%]{margin-left:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}